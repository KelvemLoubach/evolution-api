{"version":3,"sources":["../../../../../src/api/integrations/channel/whatsapp/baileys.controller.ts"],"sourcesContent":["import { InstanceDto } from '@api/dto/instance.dto';\r\nimport { WAMonitoringService } from '@api/services/monitor.service';\r\n\r\nexport class BaileysController {\r\n  constructor(private readonly waMonitor: WAMonitoringService) {}\r\n\r\n  public async onWhatsapp({ instanceName }: InstanceDto, body: any) {\r\n    const instance = this.waMonitor.waInstances[instanceName];\r\n\r\n    return instance.baileysOnWhatsapp(body?.jid);\r\n  }\r\n\r\n  public async profilePictureUrl({ instanceName }: InstanceDto, body: any) {\r\n    const instance = this.waMonitor.waInstances[instanceName];\r\n\r\n    return instance.baileysProfilePictureUrl(body?.jid, body?.type, body?.timeoutMs);\r\n  }\r\n\r\n  public async assertSessions({ instanceName }: InstanceDto, body: any) {\r\n    const instance = this.waMonitor.waInstances[instanceName];\r\n\r\n    return instance.baileysAssertSessions(body?.jids, body?.force);\r\n  }\r\n\r\n  public async createParticipantNodes({ instanceName }: InstanceDto, body: any) {\r\n    const instance = this.waMonitor.waInstances[instanceName];\r\n\r\n    return instance.baileysCreateParticipantNodes(body?.jids, body?.message, body?.extraAttrs);\r\n  }\r\n\r\n  public async getUSyncDevices({ instanceName }: InstanceDto, body: any) {\r\n    const instance = this.waMonitor.waInstances[instanceName];\r\n\r\n    return instance.baileysGetUSyncDevices(body?.jids, body?.useCache, body?.ignoreZeroDevices);\r\n  }\r\n\r\n  public async generateMessageTag({ instanceName }: InstanceDto) {\r\n    const instance = this.waMonitor.waInstances[instanceName];\r\n\r\n    return instance.baileysGenerateMessageTag();\r\n  }\r\n\r\n  public async sendNode({ instanceName }: InstanceDto, body: any) {\r\n    const instance = this.waMonitor.waInstances[instanceName];\r\n\r\n    return instance.baileysSendNode(body?.stanza);\r\n  }\r\n\r\n  public async signalRepositoryDecryptMessage({ instanceName }: InstanceDto, body: any) {\r\n    const instance = this.waMonitor.waInstances[instanceName];\r\n\r\n    return instance.baileysSignalRepositoryDecryptMessage(body?.jid, body?.type, body?.ciphertext);\r\n  }\r\n\r\n  public async getAuthState({ instanceName }: InstanceDto) {\r\n    const instance = this.waMonitor.waInstances[instanceName];\r\n\r\n    return instance.baileysGetAuthState();\r\n  }\r\n}\r\n"],"mappings":"4ZAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,uBAAAE,IAAA,eAAAC,EAAAH,GAGO,IAAME,EAAN,KAAwB,CAC7B,YAA6BE,EAAgC,CAAhC,eAAAA,CAAiC,CAE9D,MAAa,WAAW,CAAE,aAAAC,CAAa,EAAgBC,EAAW,CAGhE,OAFiB,KAAK,UAAU,YAAYD,CAAY,EAExC,kBAAkBC,GAAM,GAAG,CAC7C,CAEA,MAAa,kBAAkB,CAAE,aAAAD,CAAa,EAAgBC,EAAW,CAGvE,OAFiB,KAAK,UAAU,YAAYD,CAAY,EAExC,yBAAyBC,GAAM,IAAKA,GAAM,KAAMA,GAAM,SAAS,CACjF,CAEA,MAAa,eAAe,CAAE,aAAAD,CAAa,EAAgBC,EAAW,CAGpE,OAFiB,KAAK,UAAU,YAAYD,CAAY,EAExC,sBAAsBC,GAAM,KAAMA,GAAM,KAAK,CAC/D,CAEA,MAAa,uBAAuB,CAAE,aAAAD,CAAa,EAAgBC,EAAW,CAG5E,OAFiB,KAAK,UAAU,YAAYD,CAAY,EAExC,8BAA8BC,GAAM,KAAMA,GAAM,QAASA,GAAM,UAAU,CAC3F,CAEA,MAAa,gBAAgB,CAAE,aAAAD,CAAa,EAAgBC,EAAW,CAGrE,OAFiB,KAAK,UAAU,YAAYD,CAAY,EAExC,uBAAuBC,GAAM,KAAMA,GAAM,SAAUA,GAAM,iBAAiB,CAC5F,CAEA,MAAa,mBAAmB,CAAE,aAAAD,CAAa,EAAgB,CAG7D,OAFiB,KAAK,UAAU,YAAYA,CAAY,EAExC,0BAA0B,CAC5C,CAEA,MAAa,SAAS,CAAE,aAAAA,CAAa,EAAgBC,EAAW,CAG9D,OAFiB,KAAK,UAAU,YAAYD,CAAY,EAExC,gBAAgBC,GAAM,MAAM,CAC9C,CAEA,MAAa,+BAA+B,CAAE,aAAAD,CAAa,EAAgBC,EAAW,CAGpF,OAFiB,KAAK,UAAU,YAAYD,CAAY,EAExC,sCAAsCC,GAAM,IAAKA,GAAM,KAAMA,GAAM,UAAU,CAC/F,CAEA,MAAa,aAAa,CAAE,aAAAD,CAAa,EAAgB,CAGvD,OAFiB,KAAK,UAAU,YAAYA,CAAY,EAExC,oBAAoB,CACtC,CACF","names":["baileys_controller_exports","__export","BaileysController","__toCommonJS","waMonitor","instanceName","body"]}